{
   "title": "YAP - Hello World",
   "sidebar": [
      {
         "name": "step_1",
         "label": "Create Project"
      },
      {
         "name": "step_2",
         "label": "Create Routers"
      },
      {
         "name": "step_3",
         "label": "Enable Connectivity"
      }
   ],
   "navbar": {
      "logoUrl": "",
      "title": "",
      "navBgColor": "",
      "navFontColor": ""
   },
   "preface": [
      {
         "title": "Yet Another Presentation",
         "stepDesc": "Intro",
         "bodyArr": [
            "This demo describes Yet Another Presentation (YAP) tool functionalities by orchestrating a simple project in a safe mockup environment.",
            "As a new user of YAP, after familiarizing yourself with this Hello World demo, you can start a new demo or modify this current demo to orchestrate your use case.",
            "After experimenting in presentation mode, you can click on the top right wheel icon and switch to Edit mode to explore how these actions can be customized by clicking on the element icon string."
         ]
      },
      {
         "title": "Create Project",
         "stepDesc": "Create Project",
         "bodyArr": [
            "In this first step, we will create a project container for our network.",
            "The primary purpose of this activity is to explain how to execute a POST action toward our endpoint, evaluate the return code and payload, and store the UUID allocated for the project for other activities.",
            "This first exposes in the Outcome section an empty project container that allows you to test executing API calls toward any graphical elements. Just click on the cloud, select \"Get Project Details\" from the list of available commands and click on Run to execute the call."
         ]
      },
      {
         "title": "Create Routers",
         "stepDesc": "Create Routers",
         "bodyArr": [
            "The second step in our Hello World demo is to add two routers to our project.",
            "We will perform this activity with two basic POST actions to demonstrate how you can run all API calls by clicking on Run All or one at a time by clicking on the action play icon. Every demo and audience is different, but YAP provides this flexibility level in the demo delivery.",
            "Step 2 introduces the concept of \"Post-Check\" actions, which behaves like the \"Actions\" but as the \"Pre-checks\", helps separate the purpose of your API calls.",
            "Note that the Outcome diagram includes in this step more elements and highlights an aspect to remind the person delivering the presentation of the focus. A step contextual representation is more effective than a single diagram, including everything from the beginning.",
            "Node_1 in the \"Outcome\" section exposes a command to ping the Node_2 interface, confirm that the ping is failing and a second command to check that the newly created interface is in a down state."
         ]
      },
      {
         "title": "Enable Connectivity",
         "stepDesc": "Enable Connectivity",
         "bodyArr": [""]
      }
   ],
   "endpoints": {
      "MOCKUP": {
         "baseURL": "http://34.143.199.115:3010",
         "headers": {
            "Content-Type": "application/json"
         }
      }
   },
   "globalVariables": {
      "id": "test123"
   },
   "mainContent": {
      "step_1": {
         "description": ["Create a new project in the mockup server."],
         "continueOnFail": false,
         "prefaceRef": 1,
         "preCheck": [],
         "actions": [
            {
               "type": "request",
               "useEndpoint": "MOCKUP",
               "header": "Create",
               "headerColor": "Green",
               "title": "Add new project",
               "description": "",
               "url": "api/project",
               "method": "post",
               "data": {
                  "name": "My project",
                  "description": "Mockup project to demonstrate YAP functionalities",
                  "routers": []
               },
               "expect": [
                  {
                     "type": "codeIs",
                     "value": ["201"]
                  },
                  {
                     "type": "bodyContain",
                     "value": "uuid"
                  }
               ],
               "match": {
                  "objectPath": "uuid",
                  "regEx": "(.*)",
                  "matchGroup": "1",
                  "storeAs": "projectId"
               }
            }
         ],
         "postCheck": [],
         "outcome": [
            {
               "summaryText": "A new clean project has been created - Click on the highligher cloud and execute the get details command.",
               "elements": {
                  "nodes": [
                     {
                        "data": { "id": "Project", "label": "My New Project" },
                        "position": { "x": 400, "y": -100 },
                        "classes": "size-xxxlg-rect highlight l3vpn"
                     }
                  ]
               },
               "commands": {
                  "Project": [
                     {
                        "type": "request",
                        "useEndpoint": "MOCKUP",
                        "displayResponseAs": "json",
                        "objectPath": "",
                        "title": "get project detials",
                        "url": "/api/project/{{projectId}}",
                        "method": "get",
                        "expect": [],
                        "data": {}
                     }
                  ]
               }
            }
         ]
      },
      "step_2": {
         "description": ["Add to the project two new routers."],
         "continueOnFail": false,
         "prefaceRef": 2,
         "preCheck": [
            {
               "type": "request",
               "useEndpoint": "MOCKUP",
               "header": "Get",
               "headerColor": "",
               "title": "Confirm reachability to the newly created project",
               "description": "",
               "url": "/api/project/{{projectId}}",
               "method": "get",
               "data": {},
               "expect": [
                  {
                     "type": "codeIs",
                     "value": ["200"]
                  }
               ]
            }
         ],
         "actions": [
            {
               "type": "request",
               "useEndpoint": "MOCKUP",
               "header": "Create",
               "headerColor": "Green",
               "title": "Add Node_1",
               "description": "",
               "url": "api/project/{{projectId}}/router",
               "method": "post",
               "data": {
                  "name": "Node_1",
                  "description": "First router",
                  "loopback": "6.6.6.1/32",
                  "intefaces": [
                     {
                        "name": "Ge0/0/0/0",
                        "ip": "1.1.1.1/24",
                        "status": "down"
                     }
                  ]
               },
               "expect": [
                  {
                     "type": "codeIs",
                     "value": ["201"]
                  },
                  {
                     "type": "bodyContain",
                     "value": "uuid"
                  }
               ],
               "match": {
                  "objectPath": "uuid",
                  "regEx": "(.*)",
                  "matchGroup": "1",
                  "storeAs": "routerId1"
               }
            },
            {
               "type": "request",
               "useEndpoint": "MOCKUP",
               "header": "Create",
               "headerColor": "Green",
               "title": "Add Node_2",
               "description": "",
               "url": "api/project/{{projectId}}/router",
               "method": "post",
               "data": {
                  "name": "Node_2",
                  "description": "Second router",
                  "loopback": "6.6.6.2/32",
                  "intefaces": [
                     {
                        "name": "Ge0/0/0/0",
                        "ip": "1.1.1.2/24",
                        "status": "down"
                     }
                  ]
               },
               "expect": [
                  {
                     "type": "codeIs",
                     "value": ["201"]
                  },
                  {
                     "type": "bodyContain",
                     "value": "uuid"
                  }
               ],
               "match": {
                  "objectPath": "uuid",
                  "regEx": "(.*)",
                  "matchGroup": "1",
                  "storeAs": "routerId2"
               }
            }
         ],
         "postCheck": [
            {
               "type": "request",
               "useEndpoint": "MOCKUP",
               "header": "RPC",
               "headerColor": "",
               "title": "Ping Node_2 interface from Node_1 (Expected Failure)",
               "description": "A ping to Node_2 interface from Node_1 should be unsuccess because the interfaces are in down state.",
               "url": "api/project/{{projectId}}/router/{{routerId1}}/live-status/exec/any",
               "method": "post",
               "data": {
                  "input": {
                     "args": "ping 1.1.1.2 source 1.1.1.1"
                  }
               },
               "expect": [
                  {
                     "type": "codeIs",
                     "value": ["200"]
                  },
                  {
                     "type": "bodyContain",
                     "value": "Success rate is 0 percent"
                  }
               ]
            }
         ],
         "outcome": [
            {
               "summaryText": "Two routers are added but there is no connectivity. Test connectivity with ping command on Node_1 and check the interface status.",
               "elements": {
                  "nodes": [
                     {
                        "data": { "id": "Project", "label": "My New Project" },
                        "position": { "x": 50, "y": 0 },
                        "classes": "size-xxxlg-rect l3vpn"
                     },
                     {
                        "data": { "id": "Node_1", "label": "Node_1" },
                        "position": { "x": -100, "y": 40 },
                        "classes": "size-lg highlight router"
                     },
                     {
                        "data": { "id": "Node_2", "label": "Node_2" },
                        "position": { "x": 200, "y": 40 },
                        "classes": "size-lg router"
                     }
                  ],
                  "edges": [
                     {
                        "data": { "source": "Node_1", "target": "Node_2" },
                        "classes": "dashed"
                     }
                  ]
               },
               "commands": {
                  "Project": [
                     {
                        "type": "request",
                        "useEndpoint": "MOCKUP",
                        "displayResponseAs": "json",
                        "objectPath": "",
                        "title": "get project details",
                        "url": "/api/project/{{projectId}}",
                        "method": "get",
                        "expect": [],
                        "data": {}
                     }
                  ],
                  "Node_1": [
                     {
                        "type": "request",
                        "useEndpoint": "MOCKUP",
                        "displayResponseAs": "json",
                        "objectPath": "",
                        "title": "get router details",
                        "url": "/api/project/{{projectId}}/router/{{routerId1}}",
                        "method": "get",
                        "data": {}
                     },
                     {
                        "type": "request",
                        "useEndpoint": "MOCKUP",
                        "displayResponseAs": "json",
                        "objectPath": "",
                        "title": "Ping Node_2 interface",
                        "url": "api/project/{{projectId}}/router/{{routerId1}}/live-status/exec/any",
                        "method": "post",
                        "data": {
                           "input": {
                              "args": "ping 1.1.1.2 source 1.1.1.1"
                           }
                        }
                     }
                  ]
               }
            }
         ]
      },
      "step_3": {
         "description": [
            "Modify the status of the routers'interfaces from down to up to enable connectivity betweeen the devices."
         ],
         "continueOnFail": false,
         "prefaceRef": 3,
         "preCheck": [],
         "actions": [
            {
               "type": "request",
               "useEndpoint": "MOCKUP",
               "header": "Patch",
               "headerColor": "green",
               "title": "Update Node_1 GE interface status (from down to up)",
               "description": "",
               "url": "api/project/{{projectId}}/router/{{routerId1}}",
               "method": "patch",
               "data": {
                  "intefaces": [
                     {
                        "name": "Ge0/0/0/0",
                        "ip": "1.1.1.1/24",
                        "status": "up"
                     }
                  ]
               },
               "expect": [
                  {
                     "type": "codeIs",
                     "value": ["200"]
                  }
               ]
            },
            {
               "type": "request",
               "useEndpoint": "MOCKUP",
               "header": "Patch",
               "headerColor": "green",
               "title": "Update Node_2 GE interface status (from down to up)",
               "description": "",
               "url": "api/project/{{projectId}}/router/{{routerId2}}",
               "method": "patch",
               "data": {
                  "intefaces": [
                     {
                        "name": "Ge0/0/0/0",
                        "ip": "1.1.1.2/24",
                        "status": "up"
                     }
                  ]
               },
               "expect": [
                  {
                     "type": "codeIs",
                     "value": ["200"]
                  }
               ]
            }
         ],
         "postCheck": [
            {
               "type": "polling",
               "useEndpoint": "MOCKUP",
               "header": "RPC",
               "headerColor": "",
               "title": "Ping Node_2 interface from Node_1 (Expected Failure)",
               "description": "A ping to Node_2 interface from Node_1 should be now sucessfull.",
               "interval": "1000",
               "maxRetry": "5",
               "url": "api/project/{{projectId}}/router/{{routerId1}}/live-status/exec/any",
               "method": "post",
               "data": {
                  "input": {
                     "args": "ping 1.1.1.2 source 1.1.1.1"
                  }
               },
               "expect": [
                  {
                     "type": "codeIs",
                     "value": ["200"]
                  },
                  {
                     "type": "bodyContain",
                     "value": "Success rate is 100 percent"
                  }
               ]
            }
         ],
         "outcome": [
            {
               "summaryText": "Established connectivity between the routers. Test connectivity with ping command on Node_1.",
               "elements": {
                  "nodes": [
                     {
                        "data": { "id": "Project", "label": "My New Project" },
                        "position": { "x": 50, "y": 0 },
                        "classes": "size-xxxlg-rect l3vpn"
                     },
                     {
                        "data": { "id": "Node_1", "label": "Node_1" },
                        "position": { "x": -100, "y": 40 },
                        "classes": "size-lg highlight router"
                     },
                     {
                        "data": { "id": "Node_2", "label": "Node_2" },
                        "position": { "x": 200, "y": 40 },
                        "classes": "size-lg router"
                     }
                  ],
                  "edges": [
                     {
                        "data": { "source": "Node_1", "target": "Node_2" }
                     }
                  ]
               },
               "commands": {
                  "Project": [
                     {
                        "type": "request",
                        "useEndpoint": "MOCKUP",
                        "displayResponseAs": "json",
                        "objectPath": "",
                        "title": "get project details",
                        "url": "/api/project/{{projectId}}",
                        "method": "get",
                        "expect": [],
                        "data": {}
                     }
                  ],
                  "Node_1": [
                     {
                        "type": "request",
                        "useEndpoint": "MOCKUP",
                        "displayResponseAs": "json",
                        "objectPath": "",
                        "title": "get router details",
                        "url": "/api/project/{{projectId}}/router/{{routerId1}}",
                        "method": "get",
                        "data": {}
                     },
                     {
                        "type": "request",
                        "useEndpoint": "MOCKUP",
                        "displayResponseAs": "json",
                        "objectPath": "",
                        "title": "Ping Node_2 interface",
                        "url": "api/project/{{projectId}}/router/{{routerId1}}/live-status/exec/any",
                        "method": "post",
                        "data": {
                           "input": {
                              "args": "ping 1.1.1.2 source 1.1.1.1"
                           }
                        }
                     }
                  ]
               }
            }
         ]
      },
      "cleanup": {
         "description": ["Delete the project from the mockup server"],
         "continueOnFail": false,
         "preCheck": [],
         "actions": [
            {
               "type": "request",
               "useEndpoint": "MOCKUP",
               "header": "Delete",
               "headerColor": "",
               "title": "Remove the project",
               "description": "",
               "url": "api/project/{{projectId}}",
               "method": "delete",
               "data": {},
               "expect": [
                  {
                     "type": "codeIs",
                     "value": ["200"]
                  }
               ]
            }
         ],
         "postCheck": []
      }
   }
}
